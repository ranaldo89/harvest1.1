{% extends 'base.html' %}

{% block content %}

<!-- Navbar -->
<nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
  <div class="justify-content-center">
    <a class="navbar-brand" href="/">H A R V E S T</a>
  </div>
  <small class="navbar-text slogan">
    
  </small>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse">
    {% block button %}
    {% if "user_id" not in session %}
      <button type="button" class="btn btn-outline-danger offset-11" data-toggle="modal" data-target="#signIn">Sign In</button>
    {% else %}
<!--       <span class="navbar-text">
        Hello, {{ fname }}
      </span>  --> 
      <div class="collapse navbar-collapse justify-content-end" >
        <div class="navbar-nav">
          <!-- <a class="nav-item nav-link" href="/profile-{{ session["user_id"] }}">Create Meal Plan</a>  -->
          <a class="nav-item nav-link" href="/mymeals">My Meals</a>  
          <a class="btn btn-outline-danger" href="/signout">Sign Out</a>
        </div>
      </div>
    {% endif %}
    {% endblock %}
  </div>
</nav>

<div class="img-wrapper">
  <img src="/static/pizza.jpg" class="img-fluid" alt="pizza image">
  <div class="img-overlay">
    <h1 class="subtitle">Don't know what to eat?</h1>
    <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#newAccount">
      Start Here
    </button>
  </div>
</div>

<!-- Modal for sign in -->
<div class="modal fade" id="signIn" tabindex="-1" role="dialog" aria-labelledby="signInLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="signInLabel">Sign In</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        
        <!-- Form -->
        <form action="/signin" id="si-form" method="POST">
            <small class="text-muted" id="signin-error"></small>
            <div class="form-group">
                <!-- <label>Email:</label> -->
                <input type="email" class="form-control" id="si-email" name="email" placeholder="Email" required>
            </div>
            
            <div class="form-group">
                <!-- <label>Password:</label> -->
                <input type="password" class="form-control" id="si-pw" name="pw" placeholder="Password" required>
            </div>
            <div class="modal-footer">
              <button type="submit" id="si-submit" class="btn btn-danger">Sign In</button>
            </div>
        </form>

      </div>
    </div>
  </div>
</div>

<!-- Modal for new account -->
<div class="modal fade" id="newAccount" tabindex="-1" role="dialog" aria-labelledby="newAccountLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="newAccountLabel">Create an account</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        
        <!-- Form -->
        <form id="newAccountForm" action="/new-account" method="POST">
            <div class="form-row">
                <div class="form-group col-md-6">
                        <input type="text" class="form-control fname" name="fname" placeholder="First name" required>
                </div>
                <div class="form-group col-md-6">
                        <input type="text" class="form-control" name="lname" placeholder="Last name" required>
                </div>
            </div>

            <div class="form-group">
                <input type="email" class="form-control" id="email" name="email" placeholder="Email" pattern=".*\.com$" required>
                <small class="text-muted" id="email-msg"></small>
            </div>
            
            
            <div class="form-group">
                <input type="password" class="form-control" id="pw" name="pw" placeholder="Password" required>
            </div>

            <div class="form-group">
                <input type="password" class="form-control" id="confirm_pw" name="confirm_pw" placeholder="Confirm password" required>
                <small class="text-muted" id="pw-msg"></small>
            </div>


            <div class="form-group">
                <label>Birthdate</label>
                <input type="date" class="form-control" name="bday" required>
            </div>
            
            <div class="form-check-inline">
              <input class="form-check-input" type="radio" name="gender" value="m">
              <label class="form-check-label">
                Male
              </label>
            </div>

            <div class="form-check-inline">
              <input class="form-check-input" type="radio" name="gender" value="f">
              <label class="form-check-label">
                Female
              </label>
            </div>

            <div class="modal-footer">
                <button id="newAccountSubmit" type="submit" class="btn btn-danger">Submit</button>
            </div>
        </form>

      </div>
    </div>
  </div>
</div>

{% endblock %}

{% block scripts %}
    <script src="/static/homepage.js"></script>
{% endblock %}
